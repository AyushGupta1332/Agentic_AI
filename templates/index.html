{% extends "base.html" %}

{% block title %}Agentic AI - Chat Interface{% endblock %}

{% block content %}
<div class="chat-container">
    <!-- Header -->
    <header class="chat-header">
        <div class="header-content">
            <h1><i class="fas fa-robot"></i> Agentic AI Assistant</h1>
            <div class="header-controls">
                <button id="clear-btn" class="btn btn-secondary" title="Clear conversation">
                    <i class="fas fa-trash"></i> Clear
                </button>
                <button id="toggle-debug" class="btn btn-secondary" title="Toggle debug info">
                    <i class="fas fa-bug"></i> Debug
                </button>
                <div class="connection-status" id="connection-status">
                    <i class="fas fa-circle status-indicator"></i>
                    <span class="status-text">Connecting...</span>
                </div>
            </div>
        </div>
    </header>

    <!-- Main Chat Area -->
    <main class="chat-main">
        <!-- Messages Container -->
        <div class="messages-container" id="messages-container">
            <div class="welcome-message">
                <div class="welcome-content">
                    <i class="fas fa-robot welcome-icon"></i>
                    <h2>Welcome to Agentic AI! ðŸ¤–</h2>
                    <p>I'm your intelligent assistant with access to:</p>
                    <ul class="features-list">
                        <li><i class="fas fa-search"></i> Web Search</li>
                        <li><i class="fas fa-newspaper"></i> Latest News</li>
                        <li><i class="fas fa-chart-line"></i> Financial Data</li>
                        <li><i class="fas fa-memory"></i> Conversation Memory</li>
                    </ul>
                    <p>Ask me anything!</p>
                </div>
            </div>
        </div>

        <!-- Typing Indicator -->
        <div class="typing-indicator" id="typing-indicator" style="display: none;">
            <div class="typing-dots">
                <div class="dot"></div>
                <div class="dot"></div>
                <div class="dot"></div>
            </div>
            <span class="typing-text">AI is thinking...</span>
        </div>

        <!-- Status Updates -->
        <div class="status-updates" id="status-updates" style="display: none;">
            <div class="status-content">
                <i class="fas fa-cog fa-spin"></i>
                <span id="status-message">Processing...</span>
            </div>
        </div>
    </main>

    <!-- Input Area -->
    <footer class="chat-footer">
        <div class="input-container">
            <div class="input-wrapper">
                <textarea 
                    id="message-input" 
                    placeholder="Type your message here... (Press Enter to send, Shift+Enter for new line)"
                    rows="1"
                    maxlength="2000"
                ></textarea>
                <button id="send-btn" class="btn btn-primary" disabled>
                    <i class="fas fa-paper-plane"></i>
                </button>
            </div>
            <div class="input-info">
                <span class="char-count" id="char-count">0/2000</span>
                <span class="input-hint">Press Enter to send</span>
            </div>
        </div>
    </footer>

    <!-- Debug Panel -->
    <div class="debug-panel" id="debug-panel" style="display: none;">
        <div class="debug-header">
            <h3><i class="fas fa-bug"></i> Debug Information</h3>
            <button id="close-debug" class="btn btn-ghost">
                <i class="fas fa-times"></i>
            </button>
        </div>
        <div class="debug-content" id="debug-content">
            <p>Debug information will appear here...</p>
        </div>
    </div>
</div>

<!-- Loading Overlay -->
<div class="loading-overlay" id="loading-overlay" style="display: none;">
    <div class="loading-content">
        <div class="loading-spinner"></div>
        <p>Initializing AI Assistant...</p>
    </div>
</div>

<!-- Templates for Dynamic Content -->
<template id="user-message-template">
    <div class="message user-message">
        <div class="message-content">
            <div class="message-text"></div>
            <div class="message-meta">
                <span class="message-time"></span>
            </div>
        </div>
        <div class="message-avatar user-avatar">
            <i class="fas fa-user"></i>
        </div>
    </div>
</template>

<template id="ai-message-template">
    <div class="message ai-message">
        <div class="message-avatar ai-avatar">
            <i class="fas fa-robot"></i>
        </div>
        <div class="message-content">
            <div class="message-text"></div>
            <div class="message-meta">
                <span class="message-time"></span>
                <span class="confidence-score"></span>
                <span class="processing-time"></span>
                <span class="method-used"></span>
            </div>
            <div class="message-sources" style="display: none;"></div>
        </div>
    </div>
</template>

<template id="error-message-template">
    <div class="message error-message">
        <div class="message-avatar error-avatar">
            <i class="fas fa-exclamation-triangle"></i>
        </div>
        <div class="message-content">
            <div class="message-text"></div>
            <div class="message-meta">
                <span class="message-time"></span>
            </div>
        </div>
    </div>
</template>
{% endblock %}
