<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Agentic AI</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
</head>
<body>
    <div class="app" id="app">
        <!-- Loading Screen -->
        <div class="loading-screen" id="loading-screen">
            <div class="loading-container">
                <div class="loading-logo">
                    <div class="logo-circle">
                        <span>AI</span>
                    </div>
                    <div class="loading-dots">
                        <span></span>
                        <span></span>
                        <span></span>
                    </div>
                </div>
                <h3>Agentic AI</h3>
                <p>Initializing your intelligent assistant...</p>
            </div>
        </div>

        <!-- Main Chat Container -->
        <div class="chat-container">
            <!-- Header -->
            <header class="chat-header">
                <div class="header-left">
                    <div class="logo-container">
                        <div class="logo">
                            <div class="logo-bg">
                                <span>AI</span>
                            </div>
                            <div class="logo-text">
                                <h1>Agentic AI</h1>
                                <div class="tagline">Your intelligent assistant</div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="header-right">
                    <div class="connection-badge connecting" id="connection-badge">
                        <div class="connection-dot"></div>
                        <span class="connection-text">Connecting...</span>
                    </div>

                    <div class="header-actions">
                        <button class="action-btn danger" id="clear-btn" title="Clear Conversation">
                            <span>üóëÔ∏è</span>
                        </button>
                    </div>
                </div>
            </header>

            <!-- Main Chat Area -->
            <main class="chat-main">
                <div class="messages-area" id="messages-area">
                    <!-- Welcome Screen -->
                    <div class="welcome-screen" id="welcome-screen">
                        <div class="welcome-hero">
                            <div class="hero-icon">
                                <div class="hero-circle">
                                    <span>AI</span>
                                </div>
                            </div>
                            <h2>Welcome to Agentic AI</h2>
                            <p class="hero-description">
                                Your intelligent assistant powered by advanced AI capabilities
                            </p>
                        </div>

                        <div class="capabilities">
                            <div class="capability-card">
                                <div class="capability-icon">
                                    <span>üåê</span>
                                </div>
                                <h3>Web Search</h3>
                                <p>Real-time information from across the web</p>
                            </div>

                            <div class="capability-card">
                                <div class="capability-icon">
                                    <span>üì∞</span>
                                </div>
                                <h3>Latest News</h3>
                                <p>Current events and breaking news updates</p>
                            </div>

                            <div class="capability-card">
                                <div class="capability-icon">
                                    <span>üìà</span>
                                </div>
                                <h3>Financial Data</h3>
                                <p>Stock prices and market analysis</p>
                            </div>

                            <div class="capability-card">
                                <div class="capability-icon">
                                    <span>üß†</span>
                                </div>
                                <h3>Smart Memory</h3>
                                <p>Contextual conversation history</p>
                            </div>
                        </div>

                        <div class="quick-starters">
                            <h3>Try asking me about:</h3>
                            <div class="starter-buttons">
                                <button class="starter-btn" data-query="What's the latest news about artificial intelligence?">
                                    <span>üì∞</span>
                                    Latest AI news
                                </button>
                                <button class="starter-btn" data-query="What's the current price of Apple stock?">
                                    <span>üí∞</span>
                                    Apple stock price
                                </button>
                                <button class="starter-btn" data-query="Tell me about the weather in New York">
                                    <span>üå§Ô∏è</span>
                                    Weather information
                                </button>
                                <button class="starter-btn" data-query="Explain quantum computing in simple terms">
                                    <span>üî¨</span>
                                    Tech explanations
                                </button>
                            </div>
                        </div>
                    </div>

                    <!-- Messages Container -->
                    <div class="messages-container" id="messages-container" style="display: none;">
                        <!-- Messages will be dynamically added here -->
                    </div>

                    <!-- Typing Indicator -->
                    <div class="typing-indicator" id="typing-indicator" style="display: none;">
                        <div class="typing-avatar">
                            <span>AI</span>
                        </div>
                        <div class="typing-content">
                            <div class="typing-animation">
                                <span></span>
                                <span></span>
                                <span></span>
                            </div>
                            <span class="typing-text">AI is thinking...</span>
                        </div>
                    </div>

                    <!-- Status Indicator -->
                    <div class="status-indicator" id="status-indicator" style="display: none;">
                        <div class="typing-avatar">
                            <span>AI</span>
                        </div>
                        <div class="status-content">
                            <div class="status-icon">
                                <span>‚ö°</span>
                            </div>
                            <span class="status-text" id="status-text">Processing...</span>
                        </div>
                    </div>
                </div>

                <!-- Input Area -->
                <div class="chat-input-area">
                    <div class="input-container">
                        <div class="input-wrapper">
                            <div class="input-field-container">
                                <textarea 
                                    id="message-input" 
                                    class="message-input" 
                                    placeholder="Ask me anything..." 
                                    rows="1"
                                    maxlength="4000"
                                ></textarea>
                            </div>
                            <div class="send-button-container">
                                <button id="send-btn" class="send-btn" title="Send" disabled>
                                    <span class="send-icon">‚û§</span>
                                    <span class="loading-icon" style="display: none;">‚è≥</span>
                                </button>
                            </div>
                        </div>
                        <div class="input-footer">
                            <div class="input-hints">
                                <div class="hint">
                                    <kbd>Enter</kbd>
                                    <span>to send</span>
                                </div>
                                <div class="hint">
                                    <kbd>Shift + Enter</kbd>
                                    <span>for new line</span>
                                </div>
                            </div>
                            <div class="char-counter">
                                <span id="char-count">0</span>/4000
                            </div>
                        </div>
                    </div>
                </div>
            </main>
        </div>
    </div>

    <!-- Toast Container -->
    <div class="toast-container" id="toast-container"></div>

    <!-- Message Templates -->
    <template id="user-message-template">
        <div class="message user-message">
            <div class="message-avatar">
                <span>üë§</span>
            </div>
            <div class="message-content">
                <div class="message-bubble">
                    <div class="message-text"></div>
                </div>
                <div class="message-footer">
                    <div class="message-meta">
                        <span class="message-time"></span>
                    </div>
                </div>
            </div>
        </div>
    </template>

    <template id="ai-message-template">
        <div class="message ai-message">
            <div class="message-avatar">
                <span>ü§ñ</span>
            </div>
            <div class="message-content">
                <div class="message-bubble">
                    <div class="message-text"></div>
                </div>
                <div class="message-footer">
                    <div class="message-meta">
                        <span class="message-time"></span>
                        <div class="confidence-badge" style="display: none;">
                            <span>‚úì</span>
                            <span class="confidence-value"></span>
                        </div>
                        <div class="processing-time" style="display: none;">
                            <span>‚è±Ô∏è</span>
                            <span class="time-value"></span>
                        </div>
                        <div class="method-badge" style="display: none;">
                            <span>üîß</span>
                            <span class="method-value"></span>
                        </div>
                    </div>
                </div>
                <div class="message-sources" style="display: none;">
                    <div class="sources-header">
                        <span>üîó</span>
                        <span>Sources</span>
                    </div>
                    <div class="sources-list"></div>
                </div>
            </div>
        </div>
    </template>

    <template id="error-message-template">
        <div class="message error-message">
            <div class="message-avatar">
                <span>‚ùå</span>
            </div>
            <div class="message-content">
                <div class="message-bubble">
                    <div class="message-text"></div>
                </div>
                <div class="message-footer">
                    <div class="message-meta">
                        <span class="message-time"></span>
                    </div>
                </div>
            </div>
        </div>
    </template>

    <template id="source-link-template">
        <a class="source-link" href="#" target="_blank" rel="noopener noreferrer">
            <span>üîó</span>
            <span class="source-title"></span>
            <span class="source-domain"></span>
        </a>
    </template>

    <!-- Scripts - IMPORTANT: Updated Socket.IO version -->
    <script src="https://cdn.socket.io/4.7.4/socket.io.min.js" integrity="sha384-Gr6Lu2Ajx28mzwyVR8CFkULdCU7kMlZ9UthllibdOSo6qAiN+yXNHqtgdTvFXMT4" crossorigin="anonymous"></script>
    <script src="{{ url_for('static', filename='js/app.js') }}"></script>
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            console.log('üöÄ Initializing Agentic AI...');
            window.app = new AgenticAI();
        });
    </script>
</body>
</html>
